Login endpoint'inin request ve response formatÄ±nÄ± inceleyeyim:


[2 tools called]

## ğŸ” **Login Endpoint Request ve Response FormatÄ±**

### ğŸ”— **Endpoint**
```
POST /api/auth/login
```

### ğŸ“¤ **Ä°stek FormatÄ± (Request)**

#### **Headers**
```http
Content-Type: application/json
```

#### **Request Body**
```json
{
  "email": "admin@mevzuatgpt.org",
  "password": "your_password",
  "turnstileToken": "0.abc123def456..." // Opsiyonel - Cloudflare Turnstile token
}
```

#### **Request Interface (TypeScript)**
```typescript
interface LoginCredentials {
  email: string;
  password: string;
  turnstileToken?: string; // Opsiyonel
}
```

### ğŸ“¥ **Cevap FormatÄ± (Response)**

#### **BaÅŸarÄ±lÄ± GiriÅŸ (200 OK)**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "user": {
    "id": "user_123",
    "email": "admin@mevzuatgpt.org",
    "role": "admin"
  }
}
```

#### **Response Interface (TypeScript)**
```typescript
interface LoginResponse {
  access_token: string;
  refresh_token: string;
  token_type: string;
  expires_in: number;
  user: {
    id: string;
    email: string;
    role: string;
  };
}
```

### âŒ **Hata CevabÄ± (400/401/403)**

#### **GeÃ§ersiz Kimlik Bilgileri (401)**
```json
{
  "message": "GeÃ§ersiz giriÅŸ bilgileri"
}
```

#### **Yetkisiz Rol (403)**
```json
{
  "message": "Bu panele eriÅŸim yetkiniz bulunmamaktadÄ±r. Sadece admin kullanÄ±cÄ±larÄ± giriÅŸ yapabilir."
}
```

#### **Eksik Alanlar (400)**
```json
{
  "message": "E-posta ve ÅŸifre alanlarÄ± zorunludur"
}
```

#### **Turnstile HatasÄ± (400)**
```json
{
  "message": "GÃ¼venlik doÄŸrulamasÄ± baÅŸarÄ±sÄ±z"
}
```

### ğŸ”’ **GÃ¼venlik Ã–zellikleri**

#### **Cloudflare Turnstile**
- Login formunda CAPTCHA benzeri gÃ¼venlik doÄŸrulamasÄ±
- `turnstileToken` alanÄ± opsiyonel ama Ã¶nerilen
- Token sÃ¼resi dolduÄŸunda yeniden doÄŸrulama gerekli

#### **Admin Rol KontrolÃ¼**
- Sadece `role: "admin"` olan kullanÄ±cÄ±lar giriÅŸ yapabilir
- DiÄŸer roller iÃ§in `UNAUTHORIZED_ROLE` hatasÄ± dÃ¶ner

#### **Token YÃ¶netimi**
- `access_token`: API Ã§aÄŸrÄ±larÄ± iÃ§in (1 saat geÃ§erli)
- `refresh_token`: Token yenileme iÃ§in
- Otomatik olarak localStorage'a kaydedilir

### ğŸ“ **Ã–rnek KullanÄ±m (JavaScript)**

```javascript
const loginData = {
  email: "admin@mevzuatgpt.org",
  password: "your_password",
  turnstileToken: "0.abc123def456..." // Opsiyonel
};

const response = await fetch('/api/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(loginData)
});

if (response.ok) {
  const data = await response.json();
  
  // Token'larÄ± sakla
  localStorage.setItem('access_token', data.access_token);
  localStorage.setItem('refresh_token', data.refresh_token);
  localStorage.setItem('user', JSON.stringify(data.user));
  
  console.log('GiriÅŸ baÅŸarÄ±lÄ±:', data.user);
} else {
  const error = await response.json();
  console.error('GiriÅŸ hatasÄ±:', error.message);
}
```

### âš ï¸ **Hata DurumlarÄ±**

- **400**: GeÃ§ersiz request formatÄ± veya Turnstile hatasÄ±
- **401**: GeÃ§ersiz email/ÅŸifre kombinasyonu
- **403**: Admin olmayan kullanÄ±cÄ± giriÅŸ denemesi
- **429**: Ã‡ok fazla giriÅŸ denemesi (rate limiting)
- **500**: Sunucu hatasÄ±

### ğŸ”„ **Token KullanÄ±mÄ±**

GiriÅŸ sonrasÄ± diÄŸer API Ã§aÄŸrÄ±larÄ±nda:
```http
Authorization: Bearer {access_token}
```

Bu endpoint ile admin paneli giriÅŸi yapÄ±lÄ±r ve tÃ¼m diÄŸer API endpoint'leri iÃ§in gerekli token alÄ±nÄ±r.